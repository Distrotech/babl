2005-09-11  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h: Removed unused list of conversions to
	types/models/formats.

	* babl/babl-conversion.c: (conversion_new):
	* babl/babl-format.c: (each_babl_format_destroy), (format_new):
	* babl/babl-image.c: (babl_image_from_linear):
	* babl/babl-introspect.c: (item_conversions_introspect):
	* babl/babl-memory.c: (babl_realloc):
	* babl/babl-model.c: (each_babl_model_destroy), (model_new):
	* babl/babl-sampling.c: (each_babl_sampling_destroy):
	* babl/babl-sanity.c: (type_sanity), (model_sanity), (babl_sanity):
	* babl/babl-type.c: (each_babl_type_destroy), (type_new):

2005-09-09  Øyvind Kolås  <pippin@gimp.org>

	* docs/Makefile.am: set BABL_PATH to builddir for creating the
	documentation
	* docs/index-static.html.in: various updates.

2005-09-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/type-u16.c: (convert_double_u16_scaled):
	* babl/base/type-u32.c: (convert_double_u32_scaled):
	* babl/base/type-u8.c: (convert_double_u8_scaled),
	(babl_base_type_u8):
	* extensions/CIE-Lab.c: (convert_double_u8_scaled),
	(convert_double_u16_scaled): uintval = rint (dval * MAXINT)

2005-09-09  Øyvind Kolås  <pippin@gimp.org>

	* tests/conversions.c: (validate_conversion): do relative average
	error calculations.
	* tests/srgb_to_lab_u8.c: update values.
	* tests/types.c: set a very low tolerance.

2005-09-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-format.c: (create_name): Create shorter names when
	the format uses a single datatype and the components are listed in
	model order.
	* babl/base/model-lab.c: removed.
	* babl/base/model-rgb.c: (formats),
	* babl/base/model-ycbcr.c: (formats): Use automatic names for formats.

2005-09-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h: added error to BablConversion.
	* babl/babl-conversion.c: (conversion_new), (babl_conversion_new):
		track changes to fields in constructors.

2005-09-08  Øyvind Kolås  <pippin@gimp.org>

	* Makefile.am: build extensions before tests.
	* extensions/Makefile.in: build extensions when check is done.
	* tests/Makefile.am: removed erroniously added foo test.

2005-09-08  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/type-float.c: 
	* babl/base/type-u16.c: 
	* babl/base/type-u8.c: s/"linear"/"plane"/
	* babl/base/Makefile.am,
	* babl/base/babl-base.c,
	* babl/base/type-u32.c: new type.
	* extensions/CIE-Lab.c: 
	* extensions/Makefile.in: changes needed (for not yet added) lcms
	extension.
	* tests/Makefile.am: added new test.
	* tests/conversions.c: new test to check fast paths against reference
	fish.

2005-09-08  Øyvind Kolås  <pippin@gimp.org>
	
	Made simple fishes work in the core.

	* babl/babl-classes.h: reduced number of conversion classes.
	removed unused from and to members in struct.
	* babl/babl-conversion.c: (conversion_new), (babl_conversion_new),
	(babl_conversion_linear_process), (babl_conversion_plane_process),
	(babl_conversion_planar_process), (babl_conversion_process):
	* babl/babl-component.c: (each_babl_component_destroy),
	(component_new): removed unused from and to members.
	* babl/babl-fish.c: (babl_conversion_find2),
	(babl_conversion_find), (babl_fish_reference), (babl_fish_simple),
	(babl_fish), (convert_to_double), (convert_from_double),
	(babl_fish_reference_process): use fast path if found directly in a
	simple fishes.
	* babl/babl-format.c: (babl_format_new):
	* babl/babl-internal.c: (babl_process):
	* babl/babl-internal.h:
	* babl/babl-introspect.c: (each_introspect):
	* babl/babl-model.c: (babl_model_new):
	* babl/babl-core.c: (babl_core_init): s/linear/plane/
	* tests/babl_class_name.c: update according to class changes.

2005-09-08  Øyvind Kolås  <pippin@gimp.org>

	* AUTHORS: Added Micahel Schumacher, and email addresses.
	* docs/index-static.html.in:
	* docs/babl.css:
	* tests/babl-html-dump.c: (main), (normalize), (show_item),
	(hide_item), (each_item), (model_html), (type_html),
	(conversion_html), (format_html): Use DHTML for expandable display of
	registered data structures.
	* docs/graphics/Makefile.am: added web target, and .SILENT option.
	* docs/Makefile.am: added .SILENT option.
	* configure.ac: added website location.

2005-09-01  Michael Schumacher  <schumaml@cvs.gnome.org>

	* configure.ac: added a check for OS_WIN32
	* babl/Makefile.am: link with libgw32c to provide dl* functions on
	win32 
	* babl/babl-extension.c: added definitions of dl* function forwin32
	* tests/Makefile.am: removed -ldl for win32

2005-09-01  Sven Neumann  <sven@gimp.org>

	* Makefile.am: don't dist the generated babl.pc file.

2005-09-01  Sven Neumann  <sven@gimp.org>

	* tests/Makefile.am (TESTS_ENVIRONMENT): set BABL_PATH to include
	extension from the builddir.

2005-09-01  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-internal.h: HACK statically define BablDb *db,
	for all internal translation units.

2005-09-01  Øyvind Kolås  <pippin@gimp.org>

	Added a 128 item hashtable to each object list.

	* babl/Makefile.am: added new file 'babl-db.c'
	* babl/babl-db.h: moved static function ...
	* babl/babl-db.c: ... here in a new file, also implemented a hashing
	optimization based on the strings of names.
	* babl/babl-internal.h: changed API in base class templates.
	* babl/babl-component.c,
	* babl/babl-extension.c,
	* babl/babl-fish.c,
	* babl/babl-format.c,
	* babl/babl-image.c,
	* babl/babl-model.c,
	* babl/babl-sampling.c,
	* babl/babl-type.c: changed db_insert(..) to babl_db_insert(db, ...)

	* babl/babl.c: added babl_fish_init ()

2005-08-31  Øyvind Kolås  <pippin@gimp.org>

	* docs/index-static.html.in: Changed ChangeLog link in NEWS section.

2005-08-31  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-component.h,
	* babl/babl-core.h,
	* babl/babl-conversion.h,
	* babl/babl-extension.h,
	* babl/babl-format.h,
	* babl/babl-instance.h,
	* babl/babl-introspect.h,
	* babl/babl-image.h,
	* babl/babl-fish.h,
	* babl/babl-model.h,
	* babl/babl-sampling.h,
	* babl/babl-sanity.h,
	* babl/babl-type.h: DELETED
	* babl/babl.h: defines moved from deleted headers. Added
	documentation.
	* babl/babl-internal.h: defines moved from deleted headers.

	* babl/Makefile.am: Reflect above changes.
	* babl/babl-classes.h: redefined conversion functions to return long,
	and take number of pixels as long.
	* babl/babl-component.c, 
	* babl/babl-conversion.c,
	* babl/babl-core.c,
	* babl/babl-db.h,
	* babl/babl-extension.c,
	* babl/babl-fish.c, 
	* babl/babl-format.c,
	* babl/babl-image.c, 
	* babl/babl-instance.h,
	* babl/babl-internal.c,
	* babl/babl-internal.h,
	* babl/babl-introspect.c,
	* babl/babl-memory.c, 
	* babl/babl-model.c,
	* babl/babl-sampling.c,
	* babl/babl-sanity.c,
	* babl/babl-type.c, 
	* babl/babl.c,
	* babl/base/model-cmyk.c,
	* babl/base/model-gray.c, 
	* babl/base/model-rgb.c, 
	* babl/base/model-ycbcr.c,
	* babl/base/type-float.c,
	* babl/base/type-u16.c,
	* babl/base/type-u8.c, 
	* docs/index-static.html.in,
	* extensions/CIE-Lab.c,
	* extensions/naive-CMYK.c, 
	* tests/babl-html-dump.c,
	* tests/babl_class_name.c,
	* tests/grayscale_to_rgb.c,
	* tests/introspect.c,
	* tests/models.c,
	* tests/nop.c,
	* tests/rgb_to_bgr.c,
	* tests/rgb_to_ycbcr.c,
	* tests/sanity.c,
	* tests/srgb_to_lab_u8.c,
	* tests/types.c: reflect changes in headers.

2005-08-31  Øyvind Kolås  <pippin@gimp.org>

	* Makefile.am,
	* babl.pc.in,
	* configure.ac,
	* extensions/Makefile.in: Fixed build of extensions. (awaiting
	fix of babl/babl-extension.c to use new #defines)

2005-08-30  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/model-gray.c: 
		(rgba_to_gray_alpha_premultiplied): fixed array index error.
	* extensions/Makefile.in: Added -I../babl to include path.
	* extensions/naive-CMYK.c: (init), (rgb_to_cmyk), (cmyk_to_rgb):
		reordered the code, fixed a component swapping issue
		discovered by tests/model.c

2005-08-30  Øyvind Kolås  <pippin@gimp.org>

	* tests/srgb_to_lab_u8.c: updated values.
	* tests/types.c: rewritten.
	* tests/models.c: added, a test to test that reference conversions
	registered for a BablModel are symmetrical.
	* tests/float_to_u8.c,
	* tests/u8_to_float.c,
	* tests/rgb_to_lab_to_rgb.c,
	* tests/rgb_to_ycbcr_to_rgb.c: removed.
	* tests/Makefile.am: updated.

2005-08-30  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-introspect.c:
		(model_introspect), 
		(format_introspect),
		(each_introspect): use double quotes for strings.
		(conversion_introspect): new, show instrumentation data.
		(fish_introspect): new, show instrumentation data.

2005-08-30  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h: Added instrumentation variables to
	BablConversion and BablFish.
	* babl/babl-conversion.c:
		(babl_conversion_new): Handle re-registration.
		(conversion_new),
		(babl_conversion_process): instrumentation variables
	* babl/babl-component.c:
		(babl_component_new): Handle re-registration.
	* babl/babl-extension.c: Code cleanup.
		(babl_extension_base): Handle re-registration.
		(babl_extension_load_dir): close dir handle when done.
	* babl/babl-fish.c:
		(create_name)
		(babl_fish_new): instrumentation variables, autogenerated
		name.
		(babl_fish_reference_new): instrumentation variables,
		autogenerated name.
		(babl_process): instrumentation variables.
		(babl_conversion_find): use the lists of the source type for
		the search (speed improvement).
		(babl_fish): 
		(process_same_model): reference process with fewer steps.
		(babl_fish_reference_process): use fast path when models are
		the same.
	* babl/babl-format.c: (babl_format_new): Handle re-registration.
	* babl/babl-model.c: (babl_model_new): handle re-registration.
	* babl/babl-type.c: (babl_type_new): handle re-registration.

2005-08-30  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-memory.c: (babl_free): freeing of non babl allocated
	memory is fatal.

2005-08-29  Øyvind Kolås  <pippin@gimp.org>

	* tests/types.c: added test that tests the symmetry of reference
	conversions for registered types.

2005-08-29  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-format.c: (each_babl_format_destroy), (format_new),
	(create_name), (babl_format_new): New API, name is now a key/value
	pair, and if not set the name will be autogenerated.
	* babl/base/model-rgb.c, 
	* babl/base/model-ycbcr.c, 
	* extensions/CIE-Lab.c, 
	* extensions/naive-CMYK.c, 
	* tests/Makefile.am,
	* tests/float_to_u8.c,
	* tests/grayscale_to_rgb.c, 
	* tests/rgb_to_bgr.c, 
	* tests/rgb_to_lab_to_rgb.c, 
	* tests/rgb_to_ycbcr.c, 
	* tests/rgb_to_ycbcr_to_rgb.c, 
	* tests/u8_to_float.c: update to new API.

2005-08-29  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-db.h: Do nor warn about collision during db_insert
	* babl/babl-extension.[ch]: Implemented fs traversal based on BABL_PATH.
	added babl_set_extender to API.
	* babl/babl-instance.h: Changed signature of type_name##_new.
	* babl/babl-introspect.c: (babl_introspect): use new babl_extender

2005-08-29  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-internal.c: (babl_internal_init): set memory functions.
	* babl/babl-memory.c: (babl_set_malloc), (babl_set_free),
	(functions_sanity), (babl_malloc), (babl_free), (babl_realloc),
	(babl_calloc), (babl_sizeof), (babl_strdup), (babl_strcat),
	(babl_memory_sanity),
	* babl/babl-memory.h: Added babl_str* functions, that behave slightly
	different from the standard ones.
	* babl/babl-util.c: (babl_add_ptr_to_list): made error fatal.
	* babl/babl.c: (babl_init), (babl_destroy): added babl_internal

2005-08-28  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-internal.[ch]: (babl_die): A function to call from
	babl_fatal (...), invokes commands resulting in a backtrace, thus
	giving context to where things broke.
	* babl/babl-component.c: (babl_component_new):
	* babl/babl-conversion.c: (babl_conversion_new):
	* babl/babl-fish.c: (babl_conversion_find):
	* babl/babl-format.c: (format_new), (babl_format_new):
	* babl/babl-model.c: (babl_model_new):
	* babl/babl-type.c: (babl_type_new): use babl_fatal() instead of
	babl_log () on API mistakes.

2005-08-28  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-pixel-format.c: removed
	* babl/babl-format.c: readded under new name.

	* babl/babl-pixel-format.h: removed
	* babl/babl-format.h: readded under new name.

	* babl/babl-classes.c: removed
	* babl/babl-internal.c: readded under new name.

	* babl/babl.h,
	* babl/Makefile.am,
	* babl/babl-fish.c: Accomodate changes.

2005-08-28  Øyvind Kolås  <pippin@gimp.org>


	* babl/babl-component.c: (babl_component_new): s/parameter/argument/

	* babl/babl-extension.[ch]: the extension class.
	* babl/babl-model.c: (create_name), (babl_model_new): generate
	automatic name, allow override with key/value pair.
	s/parameter/argument/
	* babl/babl-pixel-format.c: (babl_format_new): s/parameter/argument/
	* babl/babl-sampling.c: (babl_sampling): s/parameter/argument/
	* babl/babl-type.c: (babl_type_new): s/paramter/argument/
	* babl/babl-conversion.c, (create_name), (babl_conversion_new):
	* babl/babl-conversion.h: Changed API, first two parameters are now
	source and destination.
	* babl/babl-instance.h: Added _NO_NEW variation of declarative name.
	* babl/babl-internal.h: exit (-1) when a name lookup fails.

	* babl/babl.h: do not export babl-ids.h 

	* babl/base/Makefile.am: Files removed
	* babl/base/babl-base.c: (models): removed model-lab
	* babl/base/cpercep.[ch],
	* babl/base/models.c,
	* babl/base/model-lab.c,
	* babl/base/types.c: removed

	* babl/base/model-gray.c,
	* babl/base/model-rgb.c,
	* babl/base/model-ycbcr.c:
		(models), (conversions): changed to new model_new and
		conversion_new api.

	* babl/base/type-float.c, 
	* babl/base/type-u16.c, 
	* babl/base/type-u8.c: new conversion API


	* configure.ac,
	* Makefile.am: added extensions subdir
	* extensions/Makefile.in: NB: hard-coded installpath to
	/home/pippin/.babl/
	* extensions/CIE-Lab.c: moved here from BablBase, contains cpercep.c
	and cpercep.h
	* extensions/naive-CMYK.c: moved here from BablBase.
	* extensions/util.h: convenience functions for babl extensions.

	* babl/babl-core.[ch]: double and RGBA originating from BablBase.

	* docs/index-static.html.in: updated TODO list.

	* tests/float_to_u8.c, 
	* tests/grayscale_to_rgb.c, 
	* tests/rgb_to_bgr.c, 
	* tests/rgb_to_lab_to_rgb.c, 
	* tests/rgb_to_ycbcr.c,
	* tests/rgb_to_ycbcr_to_rgb.c, 
	* tests/srgb_to_lab_u8.c, 
	* tests/u8_to_float.c: follow naming changed.

2005-08-27  Øyvind Kolås  <pippin@gimp.org>

	* Makefile.am:
	* babl.pc.in: added -dl
	* babl/babl-classes.c: Added BablExtension to string list of types.
	* babl/babl-classes.h: Added BablExtension, some reordering in union.
	* babl/babl-conversion.c:
		(create_name), (babl_conversion_new): compute the name of the
		conversion instead of explicitly having to provide it.
	* babl/babl-core.c:
		(convert_double_double), (copy_strip_1),
		(babl_core_init): Moved double datatype and RGBA model from
		base into core.
	* babl/babl-core.h: new file
	* babl/babl-db.h: improved logging, print current extender as well.
	* babl/babl-ids.h: removed some non central ids.
	* babl/babl-internal.h: new varargs based logger.
	* babl/babl-introspect.c: (babl_introspect): use quiet "fake"
	extender. Allow introspection of single objects.
	* babl/babl-introspect.h: Allow introspection of single objects.
	* babl/babl-memory.c: (babl_memory_sanity): use babl_log instead of
	fprintf.
	* babl/babl-sanity.c: (id_sanity): only complain about id==0 in
	BablBase / BablCore.
	* babl/babl.c: (babl_init), (babl_destroy): added core and extension
	to build up/tear down lists.
	* babl/babl.h: removed babl_introspect which doesn't belong here
	anymore.
	* babl/base/Makefile.am: Removed type-double.c
	* babl/base/babl-base.c: (types), (models): removed
	babl_base_type_double ()
	* babl/base/model-rgb.c: (components), (models): removed RGBA model.
	* babl/base/type-double.c: removed
	
	* docs/index-static.html.in:
	* tests/Makefile.am: LDADD += -ldl 
	* tests/introspect.c: (main): pass NULL as argument to
	babl_introspect () to do full objectspace traversal.

	* babl/babl-fish.h:
	* babl/babl-model.h:
	* babl/babl-pixel-format.h:
	* babl/babl-sampling.h:
	* babl/babl-conversion.h:
	* babl/babl-component.h: cosmetic rearrangement of lines.

2005-08-27  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-component.c: (babl_component_new):
	* babl/babl-conversion.c: (conversion_new), (babl_conversion_new),
	(babl_conversion_process):
	* babl/babl-db.h:
	* babl/babl-fish.c: (babl_conversion_find), (babl_fish),
	(babl_fish_reference_process), (babl_fish_process), (babl_process):
	* babl/babl-image.c: (babl_image_from_linear), (babl_image):
	* babl/babl-internal.h:
	* babl/babl-introspect.c: (babl_introspect), (model_introspect):
	* babl/babl-memory.c: (babl_malloc), (babl_strdup), (babl_realloc),
	(babl_calloc):
	* babl/babl-model.c: (babl_model_new):
	* babl/babl-pixel-format.c: (format_new), (babl_format_new):
	* babl/babl-type.c: (babl_type_new):
	* babl/babl-util.c: (babl_add_ptr_to_list):
	* babl/base/type-u8.c:
	* tests/babl_class_name.c: (test): 

	Made babl_log(...) print the file, line and function by itself.

2005-08-27  Øyvind Kolås  <pippin@gimp.org>

	* docs/graphics/Makefile.am: s/INSCAPE/INKSCAPE/

2005-08-27  Sven Neumann  <sven@gimp.org>

	* configure.ac
	* Makefile.am
	* docs/Makefile.am
	* docs/graphics/Makefile.am: check for inkscape and w3m which are
	needed to build the documentation. Compile without them but bail
	out on 'make dist'.

2005-08-26  Øyvind Kolås  <pippin@gimp.org>

	* tests/rgb_to_bgr.c: added component shuffling test
	* tests/Makefile.am: added rgb_to_bgr to TESTS

2005-08-25  Øyvind Kolås  <pippin@gimp.org>

	* docs/index-static.html.in: removed done things from TODO list.

2005-08-25  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-fish.c:
		(babl_to_double),(babl_from_double): new functions.
		(babl_fish_reference_process): made type a component
		shuffling work for linear buffers
	* tests/rgb_to_lab_u8.c: filled in calculated values.

2005-08-25  Øyvind Kolås  <pippin@gimp.org>

	* tests/rgb_to_ycbcr.c,
	* tests/rgb_to_ycbcr_to_rgb.c: fix Y' component name

2005-08-25  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h:
		BablFormat: added .bytes_per_pixel
		BablImage: s/bands/components/
	* babl/babl-conversion.c: s/bands/components/
	* babl/babl-image.c: s/bands/components/
	* babl/babl-pixel-format.c: (format_new) check if provided pixel
	format matches model. Calculate .bytes_per_pixel.
	* tests/babl-html-dump.c: use format.bytes_per_pixel

2005-08-25  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h:
		BablModel: added .type
		BablFormat: reordered
		BablImage: added .format, .model, .sampling and .type
		BablFishReference: removed implementation details
	* babl/babl-component.c: (component_new): use malloc instead of calloc
	* babl/babl-conversion.c:
		(conversion_new): use malloc instead of calloc
		(babl_conversion_linear_process)
		(babl_conversion_process):  pass pitch to functions.
		(babl_conversion_planar_process): duplicate data pointers in
		image before passing them on.
	* babl/babl-db.h:
		(db_each): indentation fix.
	* babl/babl-fish.c:
		(babl_fish_reference_new),
		(babl_fish_reference_process),
		(babl_fish_process), (babl_process): restructuring of the
		reference bablfish, approaching data and component shuffling
		functionality.
	* babl/babl-image.c:
		(image_new): use malloc instead of calloc
		(babl_image_from_linear), (babl_image): Added more information
		to structure.
	* babl/babl-image.h: s/_new//
	* babl/babl-internal.h: #define BABL_MAX_COMPONENTS 32
	* babl/babl-introspect.c:
		(format_introspect): s/bands/components/
	* babl/babl-model.c:
		(model_new): use malloc instead of calloc
	* babl/babl-pixel-format.c:
		(format_new): use malloc instead of calloc
		(babl_format_new): s/bands/components/
	* babl/babl-type.c:
		(type_new): use malloc instead of calloc


	* babl/base/type-double.c,
	* babl/base/type-float.c,
	* babl/base/type-u16.c,
	* babl/base/type-u8.c: more parameters to conversion functions, added
	a codewriting macro for different scale / min/max factors.

	* docs/index-static.html.in: reindent.
	* tests/babl-html-dump.c: (format_html): s/bands/components/
	* tests/srgb_to_lab_u8.c: (test): use absolute error in check.

2005-08-24  Øyvind Kolås  <pippin@gimp.org>

	* tests/sanity.c: Added a test that fails if the internal sanity
	checks are failing.

2005-08-24  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.c,
	* babl/babl-classes.h,
	* babl/babl-component.c,
	* babl/babl-conversion.c,
	* babl/babl-db.h,
	* babl/babl-fish.c,
	* babl/babl-fish.h,
	* babl/babl-image.c,
	* babl/babl-image.h,
	* babl/babl-internal.h,
	* babl/babl-introspect.c,
	* babl/babl-model.c,
	* babl/babl-model.h,
	* babl/babl-pixel-format.c,
	* babl/babl-pixel-format.h,
	* babl/babl-sanity.c,
	* babl/babl-sanity.h,
	* babl/babl-type.c,
	* babl/babl.c,
	* babl/babl.h,
	* babl/base/model-cmyk.c,
	* babl/base/model-gray.c,
	* babl/base/model-lab.c,
	* babl/base/model-rgb.c,
	* babl/base/model-ycbcr.c,
	* tests/Makefile.am,
	* tests/babl-html-dump.c,
	* tests/babl_class_name.c,
	* tests/float_to_u8.c,
	* tests/grayscale_to_rgb.c,
	* tests/rgb_to_lab_to_rgb.c,
	* tests/rgb_to_ycbcr.c,
	* tests/rgb_to_ycbcr_to_rgb.c,
	* tests/u8_to_float.c: s/PixelFormat/Format/ (etc in other cases),
	Made BablFish be more polymorphic (accept
	format names as well as BablFormats).
	* babl/babl-ids.h: reorganized, some renames. 

	* tests/srgb_to_lab_u8.c: new test for 8bit CIE Lab format (reference
	data not correct yet).

	* babl/base/type-u16.c,
	* babl/base/type-u8.c: Added CIE fixed point data types.


2005-08-24  Øyvind Kolås  <pippin@gimp.org>

	* docs/babl.css: Added code highlighting classes.

2005-08-24  Øyvind Kolås  <pippin@gimp.org>

	* NEWS: remove draft for news release, at initial release everything
	will be new.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* docs/Makefile.am: use `tempfile` to create name of temporary file
	* docs/tools/xml_insert.sh: use `tempfile` to create name of temporary
	file.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.c,
	* babl/babl-classes.h,
	* babl/babl-conversion.c,
	* babl/babl-fish.h,
	* babl/babl-image.c,
	* babl/babl-image.h,
	* babl/babl-instance.h: Indentation, comments and other cleanup.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* docs/index-static.html.in: update webdocs.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-instance.h: babl_class_name is moved to babl-classes.h
	* babl/babl-conversion.h: add a method to the conversion class for the
	processing with registered functions.
	* babl/babl-fish.c: Use above functions.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-memory.[ch]: added additonal sanity checking (only
	handling babl-memory allocated memory in free and realloc.) And added
	new function babl_dup (void*), which duplicates an allocation.
	* babl/babl-db.h: have an initial database size.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.c: Update class names to be in sync with enum in
	babl-classes.h

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl.c: implement ref counting to avoid unneccesary destruction
	of static data when multiple instances of babl is used in an
	adressspace.

2005-08-23  Øyvind Kolås  <pippin@gimp.org>

	* tests/Makefile.am:
	* tests/babl_class_name.c: new test.

2005-08-22  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h: (BabPixelFormat): only a single BablModel.
	* babl/babl-pixel-format.h,
	* tests/babl-html-dump.c: accomodate change.

2005-08-21  Øyvind Kolås  <pippin@gimp.org>

	* docs/.cvsignore: added Makefile and Makefile.in
	* docs/graphics/.cvsignore: added Makefile and Makefile.in
	* tests/.cvsignore: added babl_html_dump

2005-08-21  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/Makefile.am: Typo, s/babl-grays/babl-gray/

2005-08-21  Øyvind Kolås  <pippin@gimp.org>

	* docs/Makefile.am: Changed which html file is piped through w3m to
	generate README.

2005-08-21  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/model-grayscale.c: removed
	* babl/base/model-gray.c: added
	* babl/base/Makefile.am:
	* docs/graphics/index.html: fixed spelling.

2005-08-21  Øyvind Kolås  <pippin@gimp.org>
	
	* docs/LGPL: added (hopefully as a link to ../COPYING)

2005-08-21  Øyvind Kolås  <pippin@gimp.org>

	* Makefile.am,
	* NEWS,
	* autogen.sh,
	* babl/Makefile.am,
	* configure.ac,
	* docs/.cvsignore,
	* docs/Makefile.am,
	* docs/babl.css,
	* docs/graphics/.cvsignore,
	* docs/graphics/Makefile.am,
	* docs/graphics/babl-16x16.svg,
	* docs/graphics/babl-48x48.svg,
	* docs/graphics/babl-a4poster.svg,
	* docs/graphics/index.html,
	* README.in,
	* docs/index-static.html.in,
	* docs/tools/xml_insert.sh,
	* tests/babl-html-dump.c, 
	* tests/Makefile.am: Added HTML based documentation as part of build
	process.

2005-08-21  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h: reindent, some documentation.
	* babl/babl-fish.c: (babl_fish_reference_new): assertions for
	arguments.
	* babl/babl-ids.h: cleanup.
	* babl/base/babl-base.c: (models): grayscale->gray
	* babl/base/model-grayscale.c: (babl_base_model_gray),
	(components), (models), (rgb_to_gray), (rgb_to_gray_2_2),
	(gray_2_2_to_rgb), (gray_to_rgb),
	(gray_alpha_premultiplied_to_rgba),
	(rgba_to_gray_alpha_premultiplied), (conversions): grayscale->gray,
	added gamma-2.2 with alpha.
	* babl/base/model-lab.c: 
	* babl/base/model-rgb.c: 
	* babl/base/model-ycbcr.c: Name normalizations
	* tests/float_to_u8.c: (test_float_to_rgb_u8):
	* tests/grayscale_to_rgb.c: (test):
	* tests/rgb_to_lab_to_rgb.c: (test):
	* tests/rgb_to_ycbcr.c: (test):
	* tests/rgb_to_ycbcr_to_rgb.c: (test):
	* tests/u8_to_float.c: (test): Name synchronization.

2005-08-18  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/util.h: added new and hopefully correct gamma correction
	and uncorrection functions.
	* babl/base/model-grayscale.c: (components),
	(rgb_to_grayscale_2_2), (grayscale_2_2_to_rgb): register
	"luminance-gamma2.2" component, and use new gamma functions.
	* babl/base/model-rgb.c: (g3_gamma_2_2), (g3_inv_gamma_2_2): use new
	gamma functions.
	* babl/base/model-ycbcr.c: (components), (models), (rgb_to_ycbcr),
	(ycbcr_to_rgb): use gamma corrected luminance, and correct gamma. (pixel_formats):
	uncomment until a new data type exist with headroom/footrom in 8bit
	for proper rescaling of 0..255 to 16..235 for luma and  +/-112 range
	with offset of 128 for chroma (16 thorugh 240 inclusive).
	* babl/base/rgb-constants.h: more digits as well as some #if 0' dead
	code for reference.
	* tests/rgb_to_lab_to_rgb.c: add more colors to the test buffer.
	* tests/rgb_to_ycbcr.c: set TOLERANCE to a more meaningful value,
	updated the ycbcr version of 50% gray.

2005-08-17  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-internal.h: (type_name##_id) babl_log upon failed
	lookups.

2005-08-17  Øyvind Kolås  <pippin@gimp.org>

	* Makefile-mini
	* babl/Makefile-mini: removed

2005-08-17  Øyvind Kolås  <pippin@gimp.org>

	* configure.ac: added babl/Makefile to AC_CONFIG_FILES().

2005-08-17  Sven Neumann  <sven@gimp.org>

	* README.in: spelling.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/pixel-formats.c: removed

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-model.c: (model_new)
	* babl/babl-pixel-format.c: (pixel_format_new): reordered allocation
	to place string (to avoid placing pointers in non aligned adresses).

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-component.c: (component_new, each_babl_component_destroy) allocate
	larger chunk, (babl_component_new) removed Babl* switch, 
	* babl/babl-conversion.c: (conversion_new): removed superflous runtime
	warnings.
	* babl/babl-fish.c: (babl_fish_process): reindent, added assert for
	instance.
	* babl/babl-image.c: (image_new, babl_image_new): reindent,
	, (babl_image_new_from_linear): added asserts for parameters.
	* babl/babl-model.c: (each_babl_model_destroy, model_new): allocate
	larger chunk.
	* babl/babl-pixel-format.c: (each_babl_pixel_format_destroy,
	pixel_format_new): allocate larger chunk.
	* babl/babl-sanity.c: (babl_conversion_source): removed FIXME comment
	used for helper function just used to make code more readable.
	* babl/babl-type.c: (each_babl_type_destroy, type_new): allocate
	larger chunk.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-classes.h: (BablSampling) added static name.
	* babl/babl-sampling.c: (babl_sampling_init): initialize names
	* babl/babl-introspect.c: (pixel_format_introspect): display sampling
	name as well.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-component.[ch]
	* babl/babl-conversion.[ch]
	* babl/babl-fish.[ch]
	* babl/babl-image.[ch]
	* babl/babl-instance.h
	* babl/babl-internal.h
	* babl/babl-introspect.c
	* babl/babl-model.[ch] 
	* babl/babl-pixel-format.[ch]
	* babl/babl-sampling.[ch] 
	* babl/babl-sanity.c 
	* babl/babl-type.[ch] 
	* tests/float_to_u8.c 
	* tests/grayscale_to_rgb.c
	* tests/rgb_to_lab_to_rgb.c
	* tests/rgb_to_ycbcr.c
	* tests/rgb_to_ycbcr_to_rgb.c
	* tests/u8_to_float.c: Changed to use polymorph Babl * union's instead
	of class specific structs in most cases, and in all cases for the
	public API.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>
	
	* AUTHORS: Fixed spelling of Sven Neumann.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* tests/.cvsignore: added the test binaries.
	* .cvsignore: added *.tar.gz and *.tar.bz2

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* AUTHORS: added Sven Neuman.

2005-08-16  Sven Neumann  <sven@gimp.org>

	* configure.ac: add -Wall to CFLAGS if gcc is being used. Use
	AC_CONFIG_FILES() to define the files that need to be generated.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/mode-ycbcr.c: use coefficients from Charles Poyntons color
	FAQ.
	* tests/rgb_to_ycbcr_to_rgb.c: changed TOLERANCE to 0.00000000000001
	* tests/rgb_to_ycbcr.c: changed TOLERANCE as well as reference values.

2005-08-16  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-fish.c: reindentation, no naming of fishes.
	* babl/babl-ids.h: reordering, added YCBCRA, LAB and LAB_ALPHA
	* babl/base/Makefile.am: added cpercep.[ch] model-lab.c and
	model-ycbcr.c
	* babl/base/cpercep.[ch]: *NEW*
	* babl/base/model-lab.c: *NEW* CIE Lab color model, backed by a slightly
	modified version of cpercep from gimp sources (no gamma correction and
	normalized RGB values)
	* babl/base/model-ycbcr: made ycbcr work, numbers still need to be
	verified.
	* babl/base/babl-base.c: initialize CIE Lab and YCbCr
	* babl/base/model-cmyk.c: slight changes, it still doesn't pass
	rgb->cmyk->rgb testing so not included yet.
	* babl/base/model-rgb.c: make rgba-double use BABL_DOUBLE instead of
	BABL_FLOAT
	* babl/base/type-u16: fix conversion to double.
	* tests/Makefile.am: added rgb_to_lab_to_rgb , rgb_to_ycbcr_to_rgb and
	rgb_to_ycbcr
	* tests/rgb_to_lab_to_rgb.c
	* tests/rgb_to_ycbcr_to_rgb.c
	* tests/rgb_to_ycbcr.c: *NEW* tests

2005-08-15  Øyvind Kolås  <pippin@gimp.org>

	* babl/base/model-cmyk.c
	* babl/base/model-ycbcr.c: added stubs

2005-08-15  Øyvind Kolås  <pippin@gimp.org>

	* configure.ac: add rule to generate babl/base/Makefile
	* babl/base: new directory
	* babl/base/Makefile.am
	* babl/base/babl-base.[ch]
	* babl/base/type-double.c
	* babl/base/type-float.c
	* babl/base/type-u8.c
	* babl/base/type-u16.c
	* babl/base/model-rgb.c
	* babl/base/model-grayscale.c
	* babl/base/.cvsignore: added code removed in previous commit, in
	a more oragnised manner.
	

2005-08-15  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-base/babl-base.[ch]
	* babl/babl-base/babl-base-components.c
	* babl/babl-base/babl-base-conversions.c
	* babl/babl-base/babl-base-conversions-model.c
	* babl/babl-base/babl-base-conversions-type.c
	* babl/babl-base/babl-base-models.c
	* babl/babl-base/babl-base-pixel-formats.c
	* babl/babl-base/babl-base-types.c
	* babl/babl-base/Makefile.am
	* babl/babl-base/: removed

2005-08-15  Øyvind Kolås  <pippin@gimp.org>
	
	* babl/babl-classes.h: BablPixelFormat: changed order of attributes to
	match BablModel. BablFish: removed **from and **to lists, since they
	were added at a wrong offset from the instance start anyways.
	* babl/babl-fish.c: Made the reference fish work for linear buffers
	with constant datatype
	* babl/babl-ids.h: added BABL_RGBA_DOUBLE
	* babl/babl-image.[ch]: made BablImage be allocated in a single chunk,
	added babl_image_new_from_linear()
	* babl/babl-type.c: added assertion about bits%8==0
	* babl/babl-base/babl-base-conversions-model.c: made BABL_PLANAR_SANITY accept
	single band buffers. added conversions for premultiplied grayscale.
	* babl/babl-base/babl-base-pixel-formats.c: added "rgba-double"

2005-08-15  Øyvind Kolås  <pippin@gimp.org>

	* Makefile-mini: compile both the nop and introspect programs by
	default.
	* babl/Makefile-mini: link with standard math library

2005-08-14  Øyvind Kolås  <pippin@gimp.org>
	
	* tests/float_to_u8.c
	* tests/u8_to_float.c
	* tests/grayscale_to_rgb.c: new files
	* tests/Makefile.am: including preceding tests

2005-08-14  Øyvind Kolås  <pippin@gimp.org>
	
	* babl/Makefile.am: added babl-instance.h, removed wilcard from
	EXTRA_DIST
	* babl/babl-classes.h: added BablModel **model to BablPixelFormat,
	renamed BablReferenceFish to BablFishReference. Moved some logic out
	to babl-instance.h.
	* babl/babl-instance.h: new file.
	* babl/babl-db.h: include babl-instance instead of babl-classes to
	reduce amount of headers included by headers.
	* babl/babl-fish.c: Added code to make it work for type conversions
	* babl/babl-fish.h: Added babl_fish (source, destination) prototype
	* babl/babl-internal.h: reindentation, include babl-conversion.h
	* babl/babl-pixel-format.c: add model for each band
	* babl/babl.c: destroy all fishes at finish

2005-08-14  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-base/Makefile.am: LDADD = -lm
	* babl/babl-base/babl-base-conversions-model.c: reindentation, added
	gamma functions.
	* babl/babl-base/babl-base-conversions-type.c: corrected reference
	versions of u8, u16 and float.
	* babl/babl-base/babl-base-models.c: ifdef'ed out some of the more
	arcane models.
	* babl/babl-base/babl-base-pixel-formats.c: added the corresponding
	model used to all pixel formats.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/Makefile-mini: CFLAGS = -Werror -Wall ....
	* babl/babl-classes.[ch]: BablPixelFormat removed unused pointers
	to lists of conversions. Added BablReferenceFish. Renamed kind/
	instance.type to class_type/instance.class_type. Removed mostly
	unused macro's and expanded them in source

	* babl/babl-component.c
	* babl/babl-conversion.c
	* babl/babl-db.h
	* babl/babl-fish.c
	* babl/babl-image.c
	* babl/babl-introspect.c
	* babl/babl-model.c
	* babl/babl-pixel-format.c
	* babl/babl-sampling.c

	* babl/babl-type.c: removed switch statement since all enums are
	handled equally.

	* babl/tests/Makefile.am: added nop and introspect to TESTS, not
	actual tests yet, but at least a segfault will cause make check to
	fail.
	
2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* autogen.sh: make autogen also run make
	* babl/babl-classes.h: added define macro usable for sampling and
	fish.
	* babl/babl-fish.[ch]: cleanup of stub class
	* babl/babl-sampling.h: simplification of header using a define.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-conversion.c: indentation cleanup.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-ids: added BABL_LUMINANCE_GAMMA_2_2,
	BABL_LUMINANCE_MUL_ALPHA, BABL_GRAYSCALE_GAMMA_2_2,
	BABL_GRAYSCALE_ALPHA_PREMULTIPLIED.
	* babl/babl-base/babl-base-components: added "luminance*alpha"
	* babl/babl-base/babl-base-components.conversions-model.c: Sprinked
	asserts, added generic premultiplification operation.
	* babl/babl-base-models.c: added gamma corrected and premultiplied
	variations of grayscale.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-internal.h: issue a babl_log when the named object is not
	found during string based lookup.
	* babl/babl-pixel-format.c: added BABL_IMAGE to var_args switch.
	* babl/babl-classes.c: set babl_hmpf_on_name_lookups initial value to
	0, to make it hmpf only in babl-base.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/Makefile-mini: added babl-image.o.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/babl-sampling.h: removed reference to non existant function
	babl_sampling_introspect ().

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* babl/Makefile.am
	* babl/babl-image.c
	* babl/babl-image.h
	* babl/babl-classes.h: Added BablImage class.

	* babl/babl-component.c
	* babl/babl-conversion.c
	* babl/babl-model.c: Handle BABL_IMAGE in switches.


2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* .cvsignore: added INSTALL and README.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	* depcomp
	* install-sh
	* missing: erroniously included in first import.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	Imported into GNOME CVS.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	- seperate babl-base into separate subdir.

2005-08-09  Øyvind Kolås  <pippin@gimp.org>

	- Renamed class to model.
	- Auto toolification

2005-08-08  Øyvind Kolås  <pippin@gimp.org>

	- Completed data model
	- Added sanity checker

2005-08-07  Øyvind Kolås  <pippin@gimp.org>

	- Introspection

2005-08-05  Øyvind Kolås  <pippin@gimp.org>

	- Initial ChangeLog

2005-07-31  Øyvind Kolås  <pippin@gimp.org>

	- Type system

2005-07-29  Øyvind Kolås  <pippin@gimp.org>

	- Babl's inception in the 'Chaos Village' at WhatTheHack.

